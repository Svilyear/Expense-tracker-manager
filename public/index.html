<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="css/index.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>

    <header>
        
        <h1 >Expense Tracker Manager</h1>
       
        <nav class="nav-bar">
          <a href ="index.html">Home</a>
          <a href ="view_expenses.html">View Expenses</a>
          <a href ="index.html">Add Expenses</a>
           <a href ="edit_expenses.html">Edit Expenses</a>
            <a href ="register.html">Registration</a>
          <a href ="login.html">Login</a>
          </nav>
    </header>

  
    <p>Track your expenses easily and efficiently using our simple APP.</p>

    <div class="container"> 
      
      <form id="expense-form"> 
      <div class="expense-date"> 
        <label for="date">Date:</label>
        <input type="date" id="date" required>
      </div>
        <input type="text" id="expense-name" placeholder="Expense Name" required /> 
        <input type="number" id="expense-amount" placeholder="Amount" required /> 
        <label for="transaction-type">Type:</label>
        <select id="transaction-type">
            <option value="expense">Expense</option>
            <option value="income">Income</option>
        </select>
        <button type="submit" id="Add"> 
          <p id="add_expense">Add Transaction</p>
        </button> 
      </form> 
      <div class=""> 
        <table> 
          <thead> 
           <!-- <tr> 
              <th>Date</th>
              <th>Expense Name</th> 
              <th>Amount</th> 
              -->
            </tr> 
          </thead> 
          <tbody id="expense-list"></tbody> 
        </table> 
       <div class="total-amount"> 
          <strong>Total:</strong> 
         
          <strong><span  id="total-amount"></span> </strong>
        </div>
        <button type="submit" id="view-expenses-button">
          <p id="add_expense"><a href="view_expenses.html">VIEW HERE</a></p>
      </button> 
    
         </form>
         <hr>
        <div class="home-register">
        <span style="color: #657575">Don't have an account?</span><br>
          <a href="register.html"><button id="register-link" >Register here</button></a>
      </div>
      </section>
    </main>

    <footer>
    
     <a href="mailto:vitronicstech@gmail.com" target="_blank">Email Us</a> for more information.</p>
       
       <p>&copy; 2024 Expense Tracker App. Made with LOVE.</p>
   
   </footer>

      <script>
      document.getElementById('expense-form').addEventListener('submit', function (e) {
        e.preventDefault();

        const date = document.getElementById('date').value;
        const name = document.getElementById('expense-name').value;
        const amount = document.getElementById('expense-amount').value;

        fetch('/api/index', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ date, name, amount })
        })
          .then(response => response.json())
          .then(data => {
            if (data.error) {
              alert('Error: ' + data.error);
            } else {
              alert('Expense added successfully!');
              // Add the new expense to the table or refresh the table
              const newRow = `<tr>
                                <td>${data.date}</td>
                                <td>${data.name}</td>
                                <td>${data.amount}</td>
                              </tr>`;
              document.getElementById('expense-list').insertAdjacentHTML('beforeend', newRow);
              // Optionally update the total amount
              // Update total amount code here...
            }
          })
          .catch(error => console.error('Error:', error));
      });
    </script>

  
    <script src="js/index.js"></script>
    <script src="js/view.js"></script>

  </body>
</html>